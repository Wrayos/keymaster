name: fooproject_nonprod
idp:
  name: nonprod
  type: saml
  config:
    issuer: foo_saml_nonprod
    audience: fooproject_nonprod
    # Cert can be specified as s3:// file:// or
    # raw data
    certificate: pem_block
roles:
  - name: developer
    credentials: [ssh-jumpbox, kube, aws-ro]
    valid_for_seconds: 7200
  - name: cloudengineer
    credentials: [ssh-all, kube, aws-admin]
    valid_for_seconds: 7200
workflow:
  todo: FIXME
credentials:
  - name: ssh-jumpbox
    type: ssh_ca
    config:
      # Can be s3:// file:// or raw data
      ca_key: s3://my-bucket/sshca.key
      principals: [$idpuser]
  - name: ssh-all
    type: ssh_ca
    config:
      # Can be s3:// file:// or raw data
      ca_key: s3://my-bucket/sshca.key
      principals: [$idpuser, core, ec2-user]
  - name: kube-user
    type: kubernetes
    config:
      # Can be s3:// file:// or raw data
      ca_key: s3://my-bucket/sshca.key
  - name: kube-admin
    type: kubernetes
    config:
      # Can be s3:// file:// or raw data
      ca_key: s3://my-bucket/kubeca.key
  - name: aws-ro
    type: iam_assume_role
    config:
      # Can be role ARN or role name, e.g. ARN of ReadOnly
      # role in an account that km can assume-role to.
      target_role: arn:aws:iam::062921715666:role/ReadOnly
  - name: aws-admin
    type: iam_assume_role
    config:
      # Can be role ARN or role name, if only name is given the
      # role will be looked up in the target account.
      target_role: Administrator
access_control:
  whitelist_cidrs: ["192.168.0.0/24", "172.16.0.0/12", "10.0.0.0/8"]
